(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{163:function(e,t,a){e.exports=a(361)},232:function(e,t){},234:function(e,t){},345:function(e,t){},360:function(e,t,a){},361:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(157),o=a.n(c),s=a(11),i=a(15),l=a(17),u=a(16),m=a(18),d=a(363),p=a(365),h=a(364),f=a(6),b=a.n(f),v=a(19),g=a(4),E=a(158),j=a.n(E),O=a(104),y=a.n(O),N=(y.a.initializeApp({apiKey:"AIzaSyDWPNv8jnHuo17O8SblKeciZTqu0qKNzRk",authDomain:"az-editor-online.firebaseapp.com",databaseURL:"https://az-editor-online.firebaseio.com",projectId:"az-editor-online",storageBucket:"az-editor-online.appspot.com",messagingSenderId:"372729218502"}),y.a.database()),k=function e(){Object(s.a)(this,e)};k.getOneData=function(){var e=Object(v.a)(b.a.mark(function e(t,a){var n,r,c;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=N.ref(t).child(a),e.next=3,n.once("value");case 3:return r=e.sent,c=r.val(),e.abrupt("return",c);case 6:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),k.getAllData=function(){var e=Object(v.a)(b.a.mark(function e(t){var a,n,r;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=N.ref(t).orderByChild("title"),e.next=3,a.once("value");case 3:return n=e.sent,r=n.val(),e.abrupt("return",r);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),k.listenIfChildAdded=function(e,t,a){N.ref(e).child(t).on("child_added",a)},k.getDocument=function(){var e=Object(v.a)(b.a.mark(function e(t){var a;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"documents",e.next=3,k.getOneData("documents",t);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),k.getTemplates=Object(v.a)(b.a.mark(function e(){var t;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"templates",e.next=3,k.getAllData("templates");case 3:return t=e.sent,e.abrupt("return",t);case 5:case"end":return e.stop()}},e)})),k.updateDocument=function(){var e=Object(v.a)(b.a.mark(function e(t,a,n){var r,c;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:"documents",e.prev=1,r=N.ref("documents"),c=r.child(t),c.push().set({content:a,created:(new Date).toISOString(),user:n}),e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",!1);case 11:return e.abrupt("return",!0);case 12:case"end":return e.stop()}},e,null,[[1,8]])}));return function(t,a,n){return e.apply(this,arguments)}}(),k.insertTemplate=function(){var e=Object(v.a)(b.a.mark(function e(t,a,n){var r;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:"templates";try{r=N.ref("templates"),r.push().set({title:t,description:a,content:n})}catch(c){console.log(c)}case 2:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),k.insertHistory=function(){var e=Object(v.a)(b.a.mark(function e(t,a){var n,r;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:"histories",e.prev=1,n=N.ref().child("histories"),r=n.child(t),a.forEach(function(e){r.push().set(e)}),e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",!1);case 10:return e.abrupt("return",!0);case 11:case"end":return e.stop()}},e,null,[[1,7]])}));return function(t,a){return e.apply(this,arguments)}}();var w=a(161),x=function(e,t){return e.reverse()[t]},C=function(e){return Object.values(e)},D=function(e){var t=new Date(String(e));return t.getDay()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()+" "+(t.getHours()+":"+t.getMinutes())},T=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).getTemplates=Object(v.a)(b.a.mark(function e(){var t,n;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.getTemplates();case 2:t=e.sent,n=C(t),a.setState({templates:n});case 5:case"end":return e.stop()}},e)})),a.state={templates:[]},a.getTemplates(),a.getTemplates=a.getTemplates.bind(Object(g.a)(Object(g.a)(a))),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentWillReceiveProps",value:function(e){}},{key:"render",value:function(){return 0!==this.state.templates.length?r.a.createElement(w.a,{value:this.props.content,init:{apiKey:"11mawuf4s296afp379jcddiaf0t6bb1buhxyipc2xwzfgeb5",external_plugins:{wave:"https://cdn2.codox.io/waveTinymce/plugin.min.js"},wave:{docId:"doc2",username:this.props.username,apiKey:"5bdc0f9f-39eb-4ff1-87f4-87c83f2ca723"},plugins:["textcolor code template autoresize print preview fullpage searchreplace autolink directionality visualblocks visualchars fullscreen image link media template codesample table charmap hr pagebreak nonbreaking anchor toc insertdatetime advlist lists wordcount imagetools textpattern visualblocks autosave"],contextmenu:"link image imagetools table spellchecker",toolbar:"fontselect | bold italic fontsizeselect| forecolor backcolor | alignleft aligncenter alignright alignjustify  | numlist bullist outdent indent  | removeformat | template | code | restoredraft",templates:this.state.templates},onEditorChange:this.props.handleEditorChange}):null}}]),t}(n.Component),S=function(e){return r.a.createElement("div",{className:"list-group mt-2"}," ",e.children," ")},M=function(e){return r.a.createElement("a",{"data-toggle":"modal",href:"#modal"+e.index,className:"list-group-item list-group-item-action flex-column align-items-start"},r.a.createElement("div",{className:"d-flex w-100 justify-content-between"},r.a.createElement("h5",{className:"mb-1"}," ",e.date," ")),r.a.createElement("small",null," ",e.userName," "))},I=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.documents.map(function(t,a){return a<e.props.limit?r.a.createElement(M,{key:a,index:a,userName:t.user,date:D(t.created)}):null});return r.a.createElement(S,null,t)}}]),t}(n.Component),H=a(159),F=a.n(H),z=(a(162),a(358)),W=function(e,t){return z.diffWords(e,t)},A=function(e){return r.a.createElement("div",{className:"modal fade",id:e.id,tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalLongTitle","aria-hidden":"true"},r.a.createElement("div",{className:"modal-dialog modal-lg",role:"document"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title",id:"exampleModalLongTitle"}," ",e.title," "),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body mce-content-body"},e.children),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal"},"Close")))))},L=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={documentsDiff:[]},a.documentWithChanges=a.documentWithChanges.bind(Object(g.a)(Object(g.a)(a))),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"documentWithChanges",value:function(e,t){return W(e,t)}},{key:"existDocument",value:function(e,t){return e.length>t+1}},{key:"render",value:function(){var e=this,t=this.props.documents.map(function(t,a,n){var c=D(t.created);if(a<e.props.limit){var o=t.content,s=function(e,t){var a=W(e,t),n="";return a.forEach(function(e){n+=function(e){return e.added?'<span class="text-success">'+e.value+"</span>":e.removed?'<span class="text-danger">'+e.value+"</span>":e.value}(e)}),n}(e.existDocument(n,a+1)?n[a+1].content:"",o);return r.a.createElement(A,{key:a,id:"modal"+a,title:c},F()(s))}return null});return r.a.createElement("div",null,t)}}]),t}(n.Component),U=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onChangeTitulo=function(e){a.setState({titulo:e.target.value})},a.onChangeDescricao=function(e){a.setState({descricao:e.target.value})},a.state={titulo:"",descricao:"",conteudo:""},a.saveModel=a.saveModel.bind(Object(g.a)(Object(g.a)(a))),a.onChangeDescricao=a.onChangeDescricao.bind(Object(g.a)(Object(g.a)(a))),a.onChangeTitulo=a.onChangeTitulo.bind(Object(g.a)(Object(g.a)(a))),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"saveModel",value:function(){k.insertTemplate(this.state.titulo,this.state.descricao,this.state.conteudo)}},{key:"componentWillReceiveProps",value:function(e){this.setState({conteudo:e.conteudo})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"modal fade",id:"exampleModal",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},r.a.createElement("div",{className:"modal-dialog",role:"document"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title",id:"exampleModalLabel"},"Salvar Modelo"),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-form-label"},"T\xedtulo:"),r.a.createElement("input",{type:"text",className:"form-control",id:"titulo",onChange:this.onChangeTitulo,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-form-label"},"Descri\xe7\xe3o:"),r.a.createElement("input",{className:"form-control",id:"descricao",onChange:this.onChangeDescricao,required:!0})))),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal"},"Fechar"),r.a.createElement("button",{type:"submit",className:"btn btn-primary",onClick:this.saveModel,"data-dismiss":"modal"},"Salvar"))))))}}]),t}(n.Component),B=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).convertToHtml=function(e){j.a.convertToHtml({arrayBuffer:e.target.result},a.optionsToMammoth).then(function(e){a.setState({file:e.value})})},a.getDocument=Object(v.a)(b.a.mark(function e(){var t,n;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.getDocument(a.state.docId);case 2:t=e.sent,t=C(t),0,n=x(t,0).content,a.setState({file:n,documents:t});case 7:case"end":return e.stop()}},e)})),a.handleFile=function(e){var t=e.target.files[0],n=new FileReader;n.onload=a.convertToHtml,n.readAsArrayBuffer(t)},a.state={file:"",content:"",docId:"doc1",userName:"User - "+Math.round(100*Math.random()+1),saveLoading:!1,saveMessage:"",saveSuccess:void 0,documents:[]},a.optionsToMammoth={styleMap:["p[style-name='Section Title'] => h1:fresh","p[style-name='Subsection Title'] => h2:fresh"]},a.getDocument(),a.handleFile=a.handleFile.bind(Object(g.a)(Object(g.a)(a))),a.convertToHtml=a.convertToHtml.bind(Object(g.a)(Object(g.a)(a))),a.getDocument=a.getDocument.bind(Object(g.a)(Object(g.a)(a))),a.handleEditorChange=a.handleEditorChange.bind(Object(g.a)(Object(g.a)(a))),a.saveContent=a.saveContent.bind(Object(g.a)(Object(g.a)(a))),a.forceUpdateHandler=a.forceUpdateHandler.bind(Object(g.a)(Object(g.a)(a))),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"handleEditorChange",value:function(e){this.setState({content:e})}},{key:"saveContent",value:function(){this.setState({saveLoading:!0});var e=k.updateDocument(this.state.docId,this.state.content,this.state.userName);this.setState({saveLoading:!1,saveSuccess:e}),this.getDocument()}},{key:"forceUpdateHandler",value:function(){this.forceUpdate()}},{key:"render",value:function(){return this.state.userName?r.a.createElement("div",{id:"divMain",className:"container-fluid mt-2 justify-content-center row"},r.a.createElement("div",{className:"col-md-12 text-right m-2"},r.a.createElement("button",{type:"button",className:"btn btn-outline-success","data-toggle":"modal","data-target":"#exampleModal"},"Salvar Modelo"),r.a.createElement("button",{type:"button",className:"btn btn-outline-success",onClick:this.saveContent},"Salvar")),r.a.createElement(U,{conteudo:this.state.content}),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement("div",{className:"custom-file"},r.a.createElement("label",{className:"custom-file-label",htmlFor:"inputGroupFile02","aria-describedby":"inputGroupFileAddon02"},"Choose file"),r.a.createElement("input",{type:"file",id:"FileUpload",className:"custom-file-input",onChange:this.handleFile})))),r.a.createElement("div",{className:"col-md-8"},r.a.createElement(T,{content:this.state.file,handleEditorChange:this.handleEditorChange,username:this.state.userName})),r.a.createElement("div",{className:"col-md-3"},r.a.createElement(I,{documents:this.state.documents,limit:5})),r.a.createElement(L,{documents:this.state.documents,limit:5})):null}}]),t}(n.Component),K=function(e){var t=e.match.params.documentId,a=e.match.params.currentDocumentId,n=e.match.params.previousDocumentId;return r.a.createElement("div",{className:"container m-2"},"Document ",t,", History Version ",a," - ",n)},R=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(d.a,null,r.a.createElement(p.a,null,r.a.createElement(h.a,{path:"/realtime-test/editor",exact:!0,component:B}),r.a.createElement(h.a,{path:"/realtime-test/editor/:documentId/version/:currentDocumentId/:previousDocumentId",component:K}),r.a.createElement(h.a,{path:"*",component:B})))}}]),t}(n.Component);a(360),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[163,1,2]]]);
//# sourceMappingURL=main.8288b5e0.chunk.js.map