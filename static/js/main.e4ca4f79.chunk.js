(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{141:function(e,t,a){e.exports=a(306)},208:function(e,t){},210:function(e,t){},305:function(e,t,a){},306:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),c=a(138),o=a.n(c),s=a(6),i=a.n(s),l=a(12),u=a(14),d=a(22),m=a(25),p=a(23),f=a(24),h=a(5),b=a(139),v=a.n(b),g=a(95),j=a.n(g),O=(j.a.initializeApp({apiKey:"AIzaSyDWPNv8jnHuo17O8SblKeciZTqu0qKNzRk",authDomain:"az-editor-online.firebaseapp.com",databaseURL:"https://az-editor-online.firebaseio.com",projectId:"az-editor-online",storageBucket:"az-editor-online.appspot.com",messagingSenderId:"372729218502"}),j.a.database()),E=function e(){Object(u.a)(this,e)};E.getOneData=function(){var e=Object(l.a)(i.a.mark(function e(t,a){var n,r,c;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=O.ref(t).child(a),e.next=3,n.once("value");case 3:return r=e.sent,c=r.val(),e.abrupt("return",c);case 6:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),E.getAllData=function(){var e=Object(l.a)(i.a.mark(function e(t){var a,n,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=O.ref(t).orderByChild("title"),e.next=3,a.once("value");case 3:return n=e.sent,r=n.val(),e.abrupt("return",r);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),E.listenIfChildAdded=function(e,t,a){O.ref(e).child(t).on("child_added",a)},E.getDocument=function(){var e=Object(l.a)(i.a.mark(function e(t){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"documents",e.next=3,E.getOneData("documents",t);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),E.getTemplates=Object(l.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"templates",e.next=3,E.getAllData("templates");case 3:return t=e.sent,e.abrupt("return",t);case 5:case"end":return e.stop()}},e)})),E.updateDocument=function(){var e=Object(l.a)(i.a.mark(function e(t,a,n){var r,c;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:"documents",e.prev=1,r=O.ref("documents"),c=r.child(t),c.push().set({content:a,created:(new Date).toISOString(),user:n}),e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",!1);case 11:return e.abrupt("return",!0);case 12:case"end":return e.stop()}},e,null,[[1,8]])}));return function(t,a,n){return e.apply(this,arguments)}}(),E.insertTemplate=function(){var e=Object(l.a)(i.a.mark(function e(t,a,n){var r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:"templates";try{r=O.ref("templates"),r.push().set({title:t,description:a,content:n})}catch(c){console.log(c)}case 2:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),E.insertHistory=function(){var e=Object(l.a)(i.a.mark(function e(t,a){var n,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:"histories",e.prev=1,n=O.ref().child("histories"),r=n.child(t),a.forEach(function(e){r.push().set(e)}),e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",!1);case 10:return e.abrupt("return",!0);case 11:case"end":return e.stop()}},e,null,[[1,7]])}));return function(t,a){return e.apply(this,arguments)}}();var y=a(140),w=function(e,t){return e.reverse()[t]},k=function(e){return Object.values(e)},N=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).getTemplates=Object(l.a)(i.a.mark(function e(){var t,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.getTemplates();case 2:t=e.sent,n=k(t),a.setState({templates:n});case 5:case"end":return e.stop()}},e)})),a.state={templates:[]},a.getTemplates(),a.getTemplates=a.getTemplates.bind(Object(h.a)(Object(h.a)(a))),a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentWillReceiveProps",value:function(e){}},{key:"render",value:function(){var e=this.props.username;return 0!==this.state.templates.length?r.a.createElement(y.a,{value:this.props.content,init:{apiKey:"11mawuf4s296afp379jcddiaf0t6bb1buhxyipc2xwzfgeb5",external_plugins:{wave:"https://cdn2.codox.io/waveTinymce/plugin.min.js"},wave:{docId:"doc2",username:e,apiKey:"5bdc0f9f-39eb-4ff1-87f4-87c83f2ca723"},plugins:["code template autoresize print preview fullpage searchreplace autolink directionality visualblocks visualchars fullscreen image link media template codesample table charmap hr pagebreak nonbreaking anchor toc insertdatetime advlist lists wordcount imagetools textpattern visualblocks autosave"],contextmenu:"link image imagetools table spellchecker",toolbar:"formatselect | bold italic forecolor | alignleft aligncenter alignright alignjustify  | numlist bullist outdent indent  | removeformat | template | image | restoredraft",templates:this.state.templates},onEditorChange:this.props.handleEditorChange}):null}}]),t}(n.Component),x=function(e){return r.a.createElement("div",{className:"list-group mt-2"}," ",e.children," ")},C=function(e){return r.a.createElement("a",{href:"#",className:"list-group-item list-group-item-action flex-column align-items-start"},r.a.createElement("div",{className:"d-flex w-100 justify-content-between"},r.a.createElement("h5",{className:"mb-1"}," ",e.date," ")),r.a.createElement("small",null," ",e.userName," "))},T=function(e){function t(e){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).call(this,e))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.documents.map(function(e,t){return r.a.createElement(C,{key:t,userName:e.user,date:e.created})});return r.a.createElement(x,null,e)}}]),t}(n.Component),S=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).onChangeTitulo=function(e){a.setState({titulo:e.target.value})},a.onChangeDescricao=function(e){a.setState({descricao:e.target.value})},a.state={titulo:"",descricao:"",conteudo:""},a.saveModel=a.saveModel.bind(Object(h.a)(Object(h.a)(a))),a.onChangeDescricao=a.onChangeDescricao.bind(Object(h.a)(Object(h.a)(a))),a.onChangeTitulo=a.onChangeTitulo.bind(Object(h.a)(Object(h.a)(a))),a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"saveModel",value:function(){E.insertTemplate(this.state.titulo,this.state.descricao,this.state.conteudo)}},{key:"componentWillReceiveProps",value:function(e){this.setState({conteudo:e.conteudo})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"modal fade",id:"exampleModal",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},r.a.createElement("div",{className:"modal-dialog",role:"document"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title",id:"exampleModalLabel"},"Salvar Modelo"),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-form-label"},"T\xedtulo:"),r.a.createElement("input",{type:"text",className:"form-control",id:"titulo",onChange:this.onChangeTitulo,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-form-label"},"Descri\xe7\xe3o:"),r.a.createElement("input",{className:"form-control",id:"descricao",onChange:this.onChangeDescricao,required:!0})))),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal"},"Fechar"),r.a.createElement("button",{type:"submit",className:"btn btn-primary",onClick:this.saveModel,"data-dismiss":"modal"},"Salvar"))))))}}]),t}(n.Component),D=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).convertToHtml=function(e){v.a.convertToHtml({arrayBuffer:e.target.result},a.optionsToMammoth).then(function(e){a.setState({file:e.value})})},a.getDocument=Object(l.a)(i.a.mark(function e(){var t,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.getDocument(a.state.docId);case 2:t=e.sent,t=k(t),0,n=w(t,0).content,a.setState({file:n,documents:t});case 7:case"end":return e.stop()}},e)})),a.handleFile=function(e){var t=e.target.files[0],n=new FileReader;n.onload=a.convertToHtml,n.readAsArrayBuffer(t)},a.state={file:"",content:"",docId:"doc1",saveLoading:!1,saveMessage:"",saveSuccess:void 0,documents:[]},a.optionsToMammoth={styleMap:["p[style-name='Section Title'] => h1:fresh","p[style-name='Subsection Title'] => h2:fresh"]},a.getDocument(),a.handleFile=a.handleFile.bind(Object(h.a)(Object(h.a)(a))),a.convertToHtml=a.convertToHtml.bind(Object(h.a)(Object(h.a)(a))),a.getDocument=a.getDocument.bind(Object(h.a)(Object(h.a)(a))),a.handleEditorChange=a.handleEditorChange.bind(Object(h.a)(Object(h.a)(a))),a.saveContent=a.saveContent.bind(Object(h.a)(Object(h.a)(a))),a.forceUpdateHandler=a.forceUpdateHandler.bind(Object(h.a)(Object(h.a)(a))),a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"handleEditorChange",value:function(e){this.setState({content:e})}},{key:"saveContent",value:function(){this.setState({saveLoading:!0});var e=E.updateDocument(this.state.docId,this.state.content,this.state.userName);this.setState({saveLoading:!1,saveSuccess:e}),this.getDocument()}},{key:"forceUpdateHandler",value:function(){this.forceUpdate()}},{key:"render",value:function(){return r.a.createElement("div",{id:"divMain",className:"container-fluid mt-2 justify-content-center row"},r.a.createElement("div",{className:"col-md-12 text-right m-2"},r.a.createElement("button",{type:"button",className:"btn btn-outline-success","data-toggle":"modal","data-target":"#exampleModal"},"Salvar modelo"),r.a.createElement("button",{type:"button",className:"btn btn-outline-success",onClick:this.saveContent},"Salvar")),r.a.createElement(S,{conteudo:this.state.content}),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement("div",{className:"custom-file"},r.a.createElement("label",{className:"custom-file-label",htmlFor:"inputGroupFile02","aria-describedby":"inputGroupFileAddon02"},"Choose file"),r.a.createElement("input",{type:"file",id:"FileUpload",className:"custom-file-input",onChange:this.handleFile})))),r.a.createElement("div",{className:"col-md-8"},r.a.createElement(N,{content:this.state.file,handleEditorChange:this.handleEditorChange,username:"User - "+Math.round(100*Math.random()+1)})),r.a.createElement("div",{className:"col-md-3"},r.a.createElement(T,{documents:this.state.documents})))}}]),t}(n.Component);a(305),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[141,1,2]]]);
//# sourceMappingURL=main.e4ca4f79.chunk.js.map