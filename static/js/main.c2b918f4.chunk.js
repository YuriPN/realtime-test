(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{162:function(e,t,a){e.exports=a(359)},231:function(e,t){},233:function(e,t){},344:function(e,t){},358:function(e,t,a){},359:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(157),i=a.n(o),c=a(9),s=a(15),l=a(17),u=a(16),d=a(18),m=a(361),f=a(363),h=a(362),p=a(6),b=a.n(p),v=a(19),g=a(5),_=a(158),E=a.n(_),j=a(104),O=a.n(j),y=(O.a.initializeApp({apiKey:"AIzaSyDWPNv8jnHuo17O8SblKeciZTqu0qKNzRk",authDomain:"az-editor-online.firebaseapp.com",databaseURL:"https://az-editor-online.firebaseio.com",projectId:"az-editor-online",storageBucket:"az-editor-online.appspot.com",messagingSenderId:"372729218502"}),O.a.database()),w=function e(){Object(c.a)(this,e)};w.getOneData=function(){var e=Object(v.a)(b.a.mark(function e(t,a){var n,r,o;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=y.ref(t).child(a),e.next=3,n.once("value");case 3:return r=e.sent,o=r.val(),e.abrupt("return",o);case 6:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),w.getAllData=function(){var e=Object(v.a)(b.a.mark(function e(t){var a,n,r;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=y.ref(t).orderByChild("title"),e.next=3,a.once("value");case 3:return n=e.sent,r=n.val(),e.abrupt("return",r);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),w.listenIfChildAdded=function(e,t,a){y.ref(e).child(t).on("child_added",a)},w.getDocument=function(){var e=Object(v.a)(b.a.mark(function e(t){var a;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"documents",e.next=3,w.getOneData("documents",t);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),w.getTemplates=Object(v.a)(b.a.mark(function e(){var t;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"templates",e.next=3,w.getAllData("templates");case 3:return t=e.sent,e.abrupt("return",t);case 5:case"end":return e.stop()}},e)})),w.updateDocument=function(){var e=Object(v.a)(b.a.mark(function e(t,a,n){var r,o;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:"documents",e.prev=1,r=y.ref("documents"),o=r.child(t),o.push().set({content:a,created:(new Date).toISOString(),user:n}),e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",!1);case 11:return e.abrupt("return",!0);case 12:case"end":return e.stop()}},e,null,[[1,8]])}));return function(t,a,n){return e.apply(this,arguments)}}(),w.insertTemplate=function(){var e=Object(v.a)(b.a.mark(function e(t,a,n){var r;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:"templates";try{r=y.ref("templates"),r.push().set({title:t,description:a,content:n})}catch(o){console.log(o)}case 2:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),w.insertHistory=function(){var e=Object(v.a)(b.a.mark(function e(t,a){var n,r;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:"histories",e.prev=1,n=y.ref().child("histories"),r=n.child(t),a.forEach(function(e){r.push().set(e)}),e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",!1);case 10:return e.abrupt("return",!0);case 11:case"end":return e.stop()}},e,null,[[1,7]])}));return function(t,a){return e.apply(this,arguments)}}();var k,N,x,C,D,T,S,M,I,H,F,z,A,L,U,q,B,K=a(161),R=function(e,t){return e.reverse()[t]},W=function(e){return Object.values(e)},$=function(e){var t=new Date(String(e));return t.getDay()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()+" "+(t.getHours()+":"+t.getMinutes())},P=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).getTemplates=Object(v.a)(b.a.mark(function e(){var t,n;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.getTemplates();case 2:t=e.sent,n=W(t),a.setState({templates:n});case 5:case"end":return e.stop()}},e)})),a.state={templates:[]},a.getTemplates(),a.getTemplates=a.getTemplates.bind(Object(g.a)(Object(g.a)(a))),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){}},{key:"render",value:function(){return 0!==this.state.templates.length?r.a.createElement(K.a,{value:this.props.content,init:{apiKey:"11mawuf4s296afp379jcddiaf0t6bb1buhxyipc2xwzfgeb5",external_plugins:{wave:"https://cdn2.codox.io/waveTinymce/plugin.min.js"},wave:{docId:"doc2",username:this.props.username,apiKey:"5bdc0f9f-39eb-4ff1-87f4-87c83f2ca723"},plugins:["textcolor code template autoresize print preview fullpage searchreplace autolink directionality visualblocks visualchars fullscreen image link media template codesample table charmap hr pagebreak nonbreaking anchor toc insertdatetime advlist lists wordcount imagetools textpattern visualblocks autosave"],contextmenu:"link image imagetools table spellchecker",toolbar:"fontselect | bold italic fontsizeselect | forecolor backcolor | alignleft aligncenter alignright alignjustify  | numlist bullist outdent indent  | removeformat | template | code | restoredraft",templates:this.state.templates},onEditorChange:this.props.handleEditorChange}):null}}]),t}(n.Component),G=function(e){return r.a.createElement("div",{className:"list-group mt-2"}," ",e.children," ")},J=function(e){return r.a.createElement("a",{"data-toggle":"modal",href:"#modal"+e.index,className:"list-group-item list-group-item-action flex-column align-items-start"},r.a.createElement("div",{className:"d-flex w-100 justify-content-between"},r.a.createElement("h5",{className:"mb-1"}," ",e.date," ")),r.a.createElement("small",null," ",e.userName," "))},V=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.documents.map(function(t,a){return a<e.props.limit?r.a.createElement(J,{key:a,index:a,userName:t.user,date:$(t.created)}):null});return r.a.createElement(G,null,t)}}]),t}(n.Component),Y=a(159),Z=a.n(Y),Q=function(e){return r.a.createElement("div",{className:"modal fade",id:e.id,tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalLongTitle","aria-hidden":"true"},r.a.createElement("div",{className:"modal-dialog modal-lg",role:"document"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title",id:"exampleModalLongTitle"}," ",e.title," "),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body mce-content-body"},e.children),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal"},"Close")))))};I=function(e){return">"===e},H=function(e){return"<"===e},z=function(e){return/^\s+$/.test(e)},F=function(e){return/^\s*<[^>]+>\s*$/.test(e)},A=function(e){return!F(e)},k=function e(t,a,n){Object(c.a)(this,e),this.start_in_before=t,this.start_in_after=a,this.length=n,this.end_in_before=this.start_in_before+this.length-1,this.end_in_after=this.start_in_after+this.length-1},M=function(e){var t,a,n,r,o,i;for(o="char",a="",i=[],n=0,r=e.length;n<r;n++)switch(t=e[n],o){case"tag":I(t)?(a+=">",i.push(a),a="",o=z(t)?"whitespace":"char"):a+=t;break;case"char":H(t)?(a&&i.push(a),a="<",o="tag"):/\s/.test(t)?(a&&i.push(a),a=t,o="whitespace"):/[\w\#@]+/i.test(t)?a+=t:(a&&i.push(a),a=t);break;case"whitespace":H(t)?(a&&i.push(a),a="<",o="tag"):z(t)?a+=t:(a&&i.push(a),a=t,o="char");break;default:throw new Error("Unknown mode ".concat(o))}return a&&i.push(a),i},T=function(e,t,a,n,r,o,i){var c,s,l,u,d,m,f,h,p,b,v,g,_,E,j;for(s=n,c=o,l=0,v={},m=u=E=n,j=r;E<=j?u<j:u>j;m=E<=j?++u:--u){for(_={},f=0,h=(p=a[e[m]]).length;f<h;f++)if(!((d=p[f])<o)){if(d>=i)break;null==v[d-1]&&(v[d-1]=0),g=v[d-1]+1,_[d]=g,g>l&&(s=m-g+1,c=d-g+1,l=g)}v=_}return 0!==l&&(b=new k(s,c,l)),b},U=function(e,t,a,n,r,o,i,c){var s;return null!=(s=T(e,0,a,n,r,o,i))&&(n<s.start_in_before&&o<s.start_in_after&&U(e,t,a,n,s.start_in_before,o,s.start_in_after,c),c.push(s),s.end_in_before<=r&&s.end_in_after<=i&&U(e,t,a,s.end_in_before+1,r,s.end_in_after+1,i,c)),c},C=function(e){var t,a,n,r,o,i;if(null==e.find_these)throw new Error("params must have find_these key");if(null==e.in_these)throw new Error("params must have in_these key");for(n={},t=0,r=(o=e.find_these).length;t<r;t++)for(n[i=o[t]]=[],a=e.in_these.indexOf(i);-1!==a;)n[i].push(a),a=e.in_these.indexOf(i,a+1);return n},S=function(e,t){var a,n;return n=[],a=C({find_these:e,in_these:t}),U(e,t,a,0,e.length,0,t.length,n)},N=function(e,t){var a,n,r,o,i,c,s,l,u,d,m,f,h,p,b,v;if(null==e)throw new Error("before_tokens?");if(null==t)throw new Error("after_tokens?");for(b=p=0,h=[],a={"false,false":"replace","true,false":"insert","false,true":"delete","true,true":"none"},(m=S(e,t)).push(new k(e.length,t.length,0)),o=r=0,l=m.length;r<l;o=++r)"none"!==(n=a[[b===(d=m[o]).start_in_before,p===d.start_in_after].toString()])&&h.push({action:n,start_in_before:b,end_in_before:"insert"!==n?d.start_in_before-1:void 0,start_in_after:p,end_in_after:"delete"!==n?d.start_in_after-1:void 0}),0!==d.length&&h.push({action:"equal",start_in_before:d.start_in_before,end_in_before:d.end_in_before,start_in_after:d.start_in_after,end_in_after:d.end_in_after}),b=d.end_in_before+1,p=d.end_in_after+1;for(v=[],s={action:"none"},i=function(t){return"equal"===t.action&&(t.end_in_before-t.start_in_before===0&&/^\s$/.test(e.slice(t.start_in_before,+t.end_in_before+1||9e9)))},c=0,u=h.length;c<u;c++)i(f=h[c])&&"replace"===s.action||"replace"===f.action&&"replace"===s.action?(s.end_in_before=f.end_in_before,s.end_in_after=f.end_in_after):(v.push(f),s=f);return v},x=function(e,t,a){var n,r,o,i,c;for(i=void 0,o=r=0,c=(t=t.slice(e,+t.length+1||9e9)).length;r<c&&(!0===(n=a(t[o]))&&(i=o),!1!==n);o=++r);return null!=i?t.slice(0,+i+1||9e9):[]},B=function(e,t){var a,n,r,o,i;for(o="",r=0,a=t.length;!(r>=a)&&(r+=(n=x(r,t,A)).length,0!==n.length&&(o+="<".concat(e,">").concat(n.join(""),"</").concat(e,">")),!(r>=a));)r+=(i=x(r,t,F)).length,o+=i.join("");return o},(L={equal:function(e,t,a){return t.slice(e.start_in_before,+e.end_in_before+1||9e9).join("")},insert:function(e,t,a){var n;return n=a.slice(e.start_in_after,+e.end_in_after+1||9e9),B("ins",n)},delete:function(e,t,a){var n;return n=t.slice(e.start_in_before,+e.end_in_before+1||9e9),B("del",n)}}).replace=function(e,t,a){return L.delete(e,t,a)+L.insert(e,t,a)},q=function(e,t,a){var n,r,o,i;for(i="",n=0,r=a.length;n<r;n++)o=a[n],i+=L[o.action](o,e,t);return i},(D=function(e,t){var a;return e===t?e:(e=M(e),t=M(t),a=N(e,t),q(e,t,a))}).html_to_tokens=M,D.find_matching_blocks=S,S.find_match=T,S.create_index=C,D.calculate_operations=N,D.render_operations=q;var X=D,ee=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={documentsDiff:[]},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"existDocument",value:function(e,t){return e.length>t+1}},{key:"render",value:function(){var e=this,t=this.props.documents.map(function(t,a,n){var o=$(t.created);if(a<e.props.limit){var i=t.content,c=e.existDocument(n,a+1)?n[a+1].content:"",s=X(c,i);return r.a.createElement(Q,{key:a,id:"modal"+a,title:o},Z()(s))}return null});return r.a.createElement("div",null,t)}}]),t}(n.Component),te=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onChangeTitulo=function(e){a.setState({titulo:e.target.value})},a.onChangeDescricao=function(e){a.setState({descricao:e.target.value})},a.state={titulo:"",descricao:"",conteudo:""},a.saveModel=a.saveModel.bind(Object(g.a)(Object(g.a)(a))),a.onChangeDescricao=a.onChangeDescricao.bind(Object(g.a)(Object(g.a)(a))),a.onChangeTitulo=a.onChangeTitulo.bind(Object(g.a)(Object(g.a)(a))),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"saveModel",value:function(){w.insertTemplate(this.state.titulo,this.state.descricao,this.state.conteudo)}},{key:"componentWillReceiveProps",value:function(e){this.setState({conteudo:e.conteudo})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"modal fade",id:"exampleModal",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},r.a.createElement("div",{className:"modal-dialog",role:"document"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title",id:"exampleModalLabel"},"Salvar Modelo"),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-form-label"},"T\xedtulo:"),r.a.createElement("input",{type:"text",className:"form-control",id:"titulo",onChange:this.onChangeTitulo,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-form-label"},"Descri\xe7\xe3o:"),r.a.createElement("input",{className:"form-control",id:"descricao",onChange:this.onChangeDescricao,required:!0})))),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal"},"Fechar"),r.a.createElement("button",{type:"submit",className:"btn btn-primary",onClick:this.saveModel,"data-dismiss":"modal"},"Salvar"))))))}}]),t}(n.Component),ae=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).convertToHtml=function(e){E.a.convertToHtml({arrayBuffer:e.target.result},a.optionsToMammoth).then(function(e){a.setState({file:e.value})})},a.getDocument=Object(v.a)(b.a.mark(function e(){var t,n;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.getDocument(a.state.docId);case 2:t=e.sent,t=W(t),0,n=R(t,0).content,a.setState({file:n,documents:t});case 7:case"end":return e.stop()}},e)})),a.handleFile=function(e){var t=e.target.files[0],n=new FileReader;n.onload=a.convertToHtml,n.readAsArrayBuffer(t)},a.state={file:"",content:"",docId:"doc1",userName:"User - "+Math.round(100*Math.random()+1),saveLoading:!1,saveMessage:"",saveSuccess:void 0,documents:[]},a.optionsToMammoth={styleMap:["p[style-name='Section Title'] => h1:fresh","p[style-name='Subsection Title'] => h2:fresh"]},a.getDocument(),a.handleFile=a.handleFile.bind(Object(g.a)(Object(g.a)(a))),a.convertToHtml=a.convertToHtml.bind(Object(g.a)(Object(g.a)(a))),a.getDocument=a.getDocument.bind(Object(g.a)(Object(g.a)(a))),a.handleEditorChange=a.handleEditorChange.bind(Object(g.a)(Object(g.a)(a))),a.saveContent=a.saveContent.bind(Object(g.a)(Object(g.a)(a))),a.forceUpdateHandler=a.forceUpdateHandler.bind(Object(g.a)(Object(g.a)(a))),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"handleEditorChange",value:function(e){this.setState({content:e})}},{key:"saveContent",value:function(){this.setState({saveLoading:!0});var e=w.updateDocument(this.state.docId,this.state.content,this.state.userName);this.setState({saveLoading:!1,saveSuccess:e}),this.getDocument()}},{key:"forceUpdateHandler",value:function(){this.forceUpdate()}},{key:"render",value:function(){return this.state.userName?r.a.createElement("div",{id:"divMain",className:"container-fluid mt-2 justify-content-center row"},r.a.createElement("div",{className:"col-md-12 text-right m-2"},r.a.createElement("button",{type:"button",className:"btn btn-outline-success","data-toggle":"modal","data-target":"#exampleModal"},"Salvar Modelo"),r.a.createElement("button",{type:"button",className:"btn btn-outline-success",onClick:this.saveContent},"Salvar")),r.a.createElement(te,{conteudo:this.state.content}),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement("div",{className:"custom-file"},r.a.createElement("label",{className:"custom-file-label",htmlFor:"inputGroupFile02","aria-describedby":"inputGroupFileAddon02"},"Choose file"),r.a.createElement("input",{type:"file",id:"FileUpload",className:"custom-file-input",onChange:this.handleFile})))),r.a.createElement("div",{className:"col-md-8"},r.a.createElement(P,{content:this.state.file,handleEditorChange:this.handleEditorChange,username:this.state.userName})),r.a.createElement("div",{className:"col-md-3"},r.a.createElement(V,{documents:this.state.documents,limit:5})),r.a.createElement(ee,{documents:this.state.documents,limit:5})):null}}]),t}(n.Component),ne=function(e){var t=e.match.params.documentId,a=e.match.params.currentDocumentId,n=e.match.params.previousDocumentId;return r.a.createElement("div",{className:"container m-2"},"Document ",t,", History Version ",a," - ",n)},re=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(m.a,null,r.a.createElement(f.a,null,r.a.createElement(h.a,{path:"/realtime-test/editor",exact:!0,component:ae}),r.a.createElement(h.a,{path:"/realtime-test/editor/:documentId/version/:currentDocumentId/:previousDocumentId",component:ne}),r.a.createElement(h.a,{path:"*",component:ae})))}}]),t}(n.Component);a(358),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(re,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[162,1,2]]]);
//# sourceMappingURL=main.c2b918f4.chunk.js.map